<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icons/image-icons.html">
<link rel="import" href="../../bower_components/iron-icons/av-icons.html">
<link rel="import" href="../shared-styles.html">

<dom-module id="timer-fab">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
      }
    </style>

    <template is="dom-if" if="[[url]]">
      <a href="[[url]]">
        <paper-fab icon="[[icon]]" on-click="_handleClick" hidden$="[[hidden]]"></paper-fab>
      </a>
    </template>
    <template is="dom-if" if="[[!url]]">
      <paper-fab icon="[[icon]]" on-click="_handleClick" hidden$="[[hidden]]"></paper-fab>
    </template>
    
  </template>
  <script>
    Polymer({
       is: "timer-fab",

       properties: {
         page: String,
         icon: {
           type: String,
           computed: '_icon(page, payload.icon)'
         },
         url: {
           type: String,
           computed: '_url(page, payload.url)'
         },
         hidden: {
           type: Boolean,
           computed: '_hidden(icon)'
         },
         payload: Object
       },

       _icon: function(page, icon) {
         if (icon) return icon;
         if (page == 'timers') return 'add';
         if (page == 'configure') return 'save';
         return false
       },

       _url: function(page, url) {
         if  (url) return url;
         if (page == 'timers') return '/configure/new';
         return false
       },

       _hidden: function(icon) {
         return !icon;
       },

       _handleClick: function(e) {
         if (this.payload && this.payload.callback) return this.payload.callback();
        //  if (page == 'timers') return this.fire('addTimer');;         
       }
    });
  </script>
</dom-module>