<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="metadata-manager">
<script>
    Polymer({
        is: 'metadata-manager',

        properties: {
            route: Object,
            title: {
                type: String,
                computed: '_title(route, route.path)'
            },
            description: {
                type: String,
                computed: '_description(route, route.path)'
            }
        },

        // Observers
        observers: [
            '_setTitle(title)',
            '_setDescription(description)'
        ],

        _title: function(route) {
            var parts = route.path.split('/').slice(1);
            switch (route.path) {
                case '/login':
                    return 'HiiT Clock: Login or Register'
                case '/timers':
                    return 'HiiT Clock: Timers'
                case '/public':
                    return 'HiiT Clock: Public Timer'
                break;
            }

            if (parts[0] == 'public' && parts.length == 4) {
                return parts[3].replace(/-/g, ' ');
            }

            return 'HiiT Clock';
        },

        _description: function(route) {
            var parts = route.path.split('/').slice(1);
            switch (route.path) {
                case '/public':
                    return 'Search the HiiT Clock timer database.'
                break;
            }

            return "HiiT Clock is an advanced interval timer for web, iOS and Android. It's free to use! Designed for HiiT, Tabata, CrossFit, Pilates and yoga. Customize your own timers or use our timer database.";
        },

        _setTitle: function (title) {
            document.head.querySelector('title').innerHTML = title;
        },

        _setDescription: function (description) {
            document.head.querySelector('meta[name="description"]').innerHTML = description;
        }

    });
</script>
</dom-module>